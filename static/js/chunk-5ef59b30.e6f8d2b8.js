(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ef59b30"],{"1d8f":function(t,e,r){"use strict";r.r(e);var n=r("c24f"),a=r("751a"),o={name:"walletpay",data:function(){return{userInfo:"",walletItem:[5,10,20,50,100,200],welletVal:5,payTypeId:"0",out_trade_no:""}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;Object(n.g)().then((function(e){var r=e.data;t.userInfo=r})).catch((function(t){}))},setWalletpay:function(){switch(this.payTypeId){case"0":this.onWxPay();break;case"1":this.onAliPay()}},onWellet:function(t){this.welletVal=t},onWxPay:function(){var t,e,r=this,n=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.out_trade_no="",(t={},e={user_id:JSON.parse(this.$Cookies.get("userInfo")).user_id,total_amount:this.welletVal},a.a.post("http://yingqiu23.com:8082/wechat/pay",t,e)).then((function(t){var e=t.data;n.clear(),r.out_trade_no=e.out_trade_no,r.payConfirm(e),window.location.href=e.mweb_url+"&redirect_url="+encodeURI("http://yingqiu23.com/#/wallet")})).catch((function(t){}))},getWxPayResult:function(){var t,e=this;(t={out_trade_no:this.out_trade_no},a.a.get("http://yingqiu23.com:8082/wechat/pay-result",t)).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},onAliPay:function(){var t=this,e=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.$axios({method:"post",url:"http://yingqiu23.com:8082/alipay/pay",params:{access_token:JSON.parse(this.$Cookies.get("userInfo")).accessToken},data:{user_id:JSON.parse(this.$Cookies.get("userInfo")).user_id,total_amount:this.welletVal}}).then((function(r){e.clear();var n=r.data;t.payConfirm();var a=document.createElement("div");a.innerHTML=n,document.body.appendChild(a),t.out_trade_no=JSON.parse(document.getElementsByName("biz_content")[0].value).out_trade_no,document.forms[0].submit(),document.body.removeChild(a)})).catch((function(t){}))},getAliPayResult:function(){var t,e=this;(t={out_trade_no:this.out_trade_no},a.a.get("http://yingqiu23.com:8082/alipay/pay-result",t)).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},payConfirm:function(){var t=this;this.$dialog.confirm({className:"pay-confirm",title:"请确认支付是否完成",confirmButtonText:"支付遇到问题，重新支付",cancelButtonText:"已完成支付"}).then((function(){t.out_trade_no=""})).catch((function(){switch(t.payTypeId){case"0":t.getWxPayResult();break;case"1":t.getAliPayResult()}}))}},watch:{}},i=r("2877"),c=Object(i.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("van-nav-bar",{staticClass:"nav",attrs:{fixed:"",title:"我的钱包","left-arrow":"","right-text":"账单"},on:{"click-left":t.$back,"click-right":function(e){return t.$router.push({path:"/wallet/list"})}}}),r("div",{staticClass:"page"},[r("div",{staticClass:"page-main"},[r("div",{staticClass:"count"},[r("div",{staticClass:"label"},[t._v(" 球币余额 ")]),r("div",{staticClass:"value",staticStyle:{height:"25px"}},[t._v(" "+t._s(t.userInfo.invented)+" "),r("div",{staticClass:"small"})])]),r("van-panel",{staticClass:"m-t-sm",attrs:{title:"球币充值"}},[r("div",{staticClass:"wallet"},[r("van-grid",{attrs:{"column-num":3}},t._l(t.walletItem,(function(e,n){return r("van-grid-item",{key:n,staticClass:"wallet-item",class:{active:e===t.welletVal},on:{click:function(r){return t.onWellet(e)}}},[r("div",{staticClass:"label"},[t._v(t._s(e)+" 球币")]),r("div",{staticClass:"small"},[t._v(t._s(e)+" 元")])])})),1)],1)]),r("van-panel",{staticClass:"m-t-sm",attrs:{title:"支付方式"}},[r("van-radio-group",{staticClass:"paytype",model:{value:t.payTypeId,callback:function(e){t.payTypeId=e},expression:"payTypeId"}},[r("van-cell-group",[r("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="0"}},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"paytype-icon paytype-icon-wechat"}),t._v(" 微信 ")]},proxy:!0},{key:"right-icon",fn:function(){return[r("van-radio",{attrs:{name:"0"}})]},proxy:!0}])}),r("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="1"}},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"paytype-icon paytype-icon-zfb"}),t._v(" 支付宝 ")]},proxy:!0},{key:"right-icon",fn:function(){return[r("van-radio",{attrs:{name:"1"}})]},proxy:!0}])})],1)],1)],1),r("van-panel",{staticClass:"m-t-sm",attrs:{title:"温馨提示"}},[r("div",{staticClass:"panel-content"},[r("div",{staticClass:"agreement"},[r("div",{staticClass:"fs-12"},[t._v(" 1、充值的球币可直接用于赛事报名，不可转让或者提现。 ")]),r("div",{staticClass:"fs-12"},[t._v(" 2、充值过程中，如遇到问题，请至“我的”-“联系客服”点击联系客服。 ")])])])])],1),r("div",{staticClass:"page-foot"},[r("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.setWalletpay}},[t._v("确认支付 "+t._s(t.welletVal)+" 元")])],1)])],1)}),[],!1,null,null,null);e.default=c.exports},4127:function(t,e,r){"use strict";function n(t,e,r,o,i,c,l,u,f,p,d,y){var m=t;if("function"==typeof l)m=l(e,m);else if(m instanceof Date)m=p(m);else if(null===m){if(o)return c&&!y?c(e,s.encoder):e;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||a.isBuffer(m))return c?[d(y?e:c(e,s.encoder))+"="+d(c(m,s.encoder))]:[d(e)+"="+d(String(m))];var h,v=[];if(void 0===m)return v;if(Array.isArray(l))h=l;else{var g=Object.keys(m);h=u?g.sort(u):g}for(var b=0;b<h.length;++b){var w=h[b];i&&null===m[w]||(v=Array.isArray(m)?v.concat(n(m[w],r(e,w),r,o,i,c,l,u,f,p,d,y)):v.concat(n(m[w],e+(f?"."+w:"["+w+"]"),r,o,i,c,l,u,f,p,d,y)))}return v}var a=r("d2334"),o=r("b313"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},c=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var r=t,c=e?a.assign({},e):{};if(null!==c.encoder&&void 0!==c.encoder&&"function"!=typeof c.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===c.delimiter?s.delimiter:c.delimiter,u="boolean"==typeof c.strictNullHandling?c.strictNullHandling:s.strictNullHandling,f="boolean"==typeof c.skipNulls?c.skipNulls:s.skipNulls,p="boolean"==typeof c.encode?c.encode:s.encode,d="function"==typeof c.encoder?c.encoder:s.encoder,y="function"==typeof c.sort?c.sort:null,m=void 0!==c.allowDots&&c.allowDots,h="function"==typeof c.serializeDate?c.serializeDate:s.serializeDate,v="boolean"==typeof c.encodeValuesOnly?c.encodeValuesOnly:s.encodeValuesOnly;if(void 0===c.format)c.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,c.format))throw new TypeError("Unknown format option provided.");var g,b,w=o.formatters[c.format];"function"==typeof c.filter?r=(b=c.filter)("",r):Array.isArray(c.filter)&&(g=b=c.filter);var O,j=[];if("object"!=typeof r||null===r)return"";O=c.arrayFormat in i?c.arrayFormat:"indices"in c?c.indices?"indices":"repeat":"indices";var _=i[O];g=g||Object.keys(r),y&&g.sort(y);for(var C=0;C<g.length;++C){var k=g[C];f&&null===r[k]||(j=j.concat(n(r[k],k,_,u,f,p?d:null,b,y,m,h,w,v)))}var x=j.join(l),A=!0===c.addQueryPrefix?"?":"";return 0<x.length?A+x:""}},4328:function(t,e,r){"use strict";var n=r("4127"),a=r("9e6a"),o=r("b313");t.exports={formats:o,parse:a,stringify:n}},"751a":function(t,e,r){"use strict";r("d3b7");var n=r("bb9a"),a=r("4328"),o=r.n(a),i={get:function(t,e){return Object(n.a)({url:t,method:"get",params:e})},post:function(t,e,r){return Object(n.a)({url:t,method:"post",params:e,data:r})},postQs:function(t,e){return Object(n.a)({url:t,method:"post",data:o.a.stringify(e)})},patch:function(t,e){return Object(n.a)({url:t,method:"patch",data:e})},put:function(t,e,r){return new Promise((function(a,o){Object(n.a)({url:t,method:"put",params:e,data:r}).then((function(t){a(t.data)})).catch((function(t){o(t)}))}))}};e.a=i},"9e6a":function(t,e,r){"use strict";function n(t,e,r){if(t){var n=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),c=i?n.slice(0,i.index):n,s=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;s.push(c)}for(var l=0;null!==(i=a.exec(n))&&l<r.depth;){if(l+=1,!r.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+n.slice(i.index)+"]"),function(t,e,r){for(var n=e,a=t.length-1;0<=a;--a){var o,i=t[a];if("[]"===i)o=(o=[]).concat(n);else{o=r.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,s=parseInt(c,10);!isNaN(s)&&i!==c&&String(s)===c&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=n:o[c]=n}n=o}return n}(s,e,r)}}var a=r("d2334"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var r=e?a.assign({},e):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null==t)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){for(var r={},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,c=n.split(e.delimiter,a),s=0;s<c.length;++s){var l,u,f=c[s],p=f.indexOf("]="),d=-1===p?f.indexOf("="):p+1;u=-1===d?(l=e.decoder(f,i.decoder),e.strictNullHandling?null:""):(l=e.decoder(f.slice(0,d),i.decoder),e.decoder(f.slice(d+1),i.decoder)),o.call(r,l)?r[l]=[].concat(r[l]).concat(u):r[l]=u}return r}(t,r):t,s=r.plainObjects?Object.create(null):{},l=Object.keys(c),u=0;u<l.length;++u){var f=l[u],p=n(f,c[f],r);s=a.merge(s,p,r)}return a.compact(s)}},b313:function(t,e,r){"use strict";var n=String.prototype.replace,a=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return n.call(t,a,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},c24f:function(t,e,r){"use strict";r.d(e,"g",(function(){return a})),r.d(e,"h",(function(){return o})),r.d(e,"j",(function(){return i})),r.d(e,"f",(function(){return c})),r.d(e,"e",(function(){return s})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return f})),r.d(e,"i",(function(){return p})),r.d(e,"d",(function(){return d}));var n=r("751a"),a=function(t){return n.a.get("/user/detail",t)},o=function(t,e){return n.a.put("/user/name",t,e)},i=function(t,e){return n.a.put("/user/sex",t,e)},c=function(t,e){return n.a.put("/user/birthday",t,e)},s=function(t,e){return n.a.put("/user/address",t,e)},l=function(t,e){return n.a.put("/user/info",t,e)},u=function(t){return n.a.get("/site/contact",t)},f=function(t){return n.a.get("/site/contact-info",t)},p=function(t){return n.a.get("/user/record",t)},d=function(t,e){return n.a.post("/user/feedback",t,e)}},d2334:function(t,e,r){"use strict";function n(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r}var a=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:n,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var a=e[n],o=a.obj[a.prop],i=Object.keys(o),c=0;c<i.length;++c){var s=i[c],l=o[s];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(e.push({obj:o,prop:s}),r.push(l))}return function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var n=[],a=0;a<e.length;++a)void 0!==e[a]&&n.push(e[a]);r.obj[r.prop]=n}}return e}(e)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",n=0;n<e.length;++n){var a=e.charCodeAt(n);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?r+=e.charAt(n):a<128?r+=o[a]:a<2048?r+=o[192|a>>6]+o[128|63&a]:a<55296||57344<=a?r+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(n+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(n)),r+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return r},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];!o.plainObjects&&!o.allowPrototypes&&a.call(Object.prototype,r)||(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=n(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach((function(r,n){a.call(e,n)?e[n]&&"object"==typeof e[n]?e[n]=t(e[n],r,o):e.push(r):e[n]=r})),e):Object.keys(r).reduce((function(e,n){var i=r[n];return a.call(e,n)?e[n]=t(e[n],i,o):e[n]=i,e}),i)}}}}]);