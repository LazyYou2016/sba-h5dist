(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-06c8b9e6"],{"200c":function(t,e,n){"use strict";n.r(e),n("99af"),n("b0c0"),n("a9e3");var r=n("22ca"),a=n("c24f"),i=n("751a"),o={name:"signUp",data:function(){return{userId:JSON.parse(this.$Cookies.get("userInfo")).user_id,matchId:this.$route.query.matchId,venueId:this.$route.query.venueId,pageName:this.$route.query.name,userInfo:{},signUpVal:1,involveDatas:{address:"",date:"",entry_list:[],is_team:0,match_id:"",match_name:"",ticket:0,ticket_last:0,ticket_nums:0,venue_id:""},openStatementView:!1,openStatementResult:["0"]}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var t=this;Object(a.g)().then((function(e){var n=e.data;t.userInfo=n,t.getInvolve()})).catch((function(t){}))},toggle:function(){},getInvolve:function(){var t=this;Object(r.b)({match_id:this.matchId,id:this.venueId}).then((function(e){var n=e.data;t.involveDatas=n})).catch((function(t){}))},onSubmit:function(){var t=this;return 0===this.openStatementResult.length?(this.$Toast({message:"请阅读并勾选赛事免责声明",position:"bottom"}),!1):this.userInfo.invented<=this.involveDatas.ticket*this.signUpVal?(this.$Dialog.alert({message:"账户球币余额不足，请充值"}).then((function(){t.$router.push({path:"/wallet"})})),!1):void this.$Dialog.confirm({title:"本次赛事，您选购".concat(this.signUpVal,"张门票，需要消耗").concat(this.involveDatas.ticket*this.signUpVal,"个球币")}).then((function(){var e,n;t.$Toast.loading({message:"下单中...",forbidClick:!0}),(e={},n={user_id:t.userId,venue_id:Number(t.venueId),match_id:t.matchId,ticket_number:t.signUpVal,total_amount:t.signUpVal*t.involveDatas.ticket},i.a.post("/consumption/create",e,n)).then((function(e){e.success&&t.$Toast.clear(),!1!==e.success&&t.$router.push({path:"/match/signUpSuccess"})})).catch((function(t){}))})).catch((function(){}))}},watch:{}},s=n("2877"),c=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("van-nav-bar",{staticClass:"nav",attrs:{fixed:"",title:t.pageName,"left-arrow":""},on:{"click-left":t.$back}}),n("div",{staticClass:"page"},[n("div",{staticClass:"page-main"},[n("van-panel",{scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"flex panel-head"},[n("div",{staticClass:"flex-item title"},[t._v(" "+t._s(t.involveDatas.match_name)+" ")]),n("div",[t._v(" 剩余门票："),n("span",{staticClass:"text-danger"},[t._v(t._s(t.involveDatas.ticket_last)+" / "+t._s(t.involveDatas.ticket_nums))])])])]},proxy:!0}])},[n("van-cell-group",[n("van-cell",{attrs:{title:"地址",value:t.involveDatas.address}}),n("van-cell",{attrs:{title:"比赛时间",value:t.involveDatas.date}})],1)],1),n("van-panel",{staticClass:"m-t-sm",scopedSlots:t._u([{key:"header",fn:function(){return[n("van-cell-group",[n("van-cell",{attrs:{title:"您最多可购买3张参赛券"}},[n("van-stepper",{attrs:{min:"1",max:3<t.involveDatas.ticket_last?3:t.involveDatas.ticket_last},model:{value:t.signUpVal,callback:function(e){t.signUpVal=e},expression:"signUpVal"}})],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"flex"},[n("div",{staticClass:"flex-item text-danger"},[t._v(" 注：可替赛，不可退票 ")]),n("div",{staticClass:"flex-item text-right"},[t._v(" 费用总额："+t._s(t.involveDatas.ticket*t.signUpVal)+" 球币 ")])])]},proxy:!0}])},[n("div",[n("van-checkbox-group",{model:{value:t.openStatementResult,callback:function(e){t.openStatementResult=e},expression:"openStatementResult"}},[n("van-cell-group",[n("van-cell",{attrs:{clickable:""},scopedSlots:t._u([{key:"title",fn:function(){return[n("van-checkbox",{ref:"checkboxes",attrs:{name:"0"}},[n("span",[t._v("我已经阅读并同意")]),n("span",{staticClass:"text-primary",on:{click:function(e){e.stopPropagation(),t.openStatementView=!0}}},[t._v("赛事免责声明")])])]},proxy:!0}])})],1)],1)],1)]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"已报名的球员"}},[0!==t.involveDatas.entry_list.length?[n("van-grid",{staticClass:"signup-list-main",attrs:{border:!1,"column-num":"6"}},t._l(t.involveDatas.entry_list,(function(e,r){return n("van-grid-item",{key:r},[n("div",{staticClass:"signup-list"},[e.avatar?[n("van-image",{staticClass:"user-head-sign",attrs:{src:t.$UrlAvatar+e.avatar,round:"",type:"cover"}})]:[n("van-image",{staticClass:"user-head-sign",attrs:{src:t.$imgDefault,round:"",type:"cover"}})],n("div",{staticClass:"signup-list-label"},[t._v(t._s(e.name))])],2)])})),1)]:[n("van-empty",{attrs:{description:"暂无数据"}})]],2)],1),n("div",{staticClass:"page-foot"},["0"!==t.involveDatas.ticket_last?n("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.onSubmit}},[t._v("确定")]):n("van-button",{attrs:{type:"primary",round:"",block:"",disabled:""}},[t._v("门票已售罄")])],1)]),n("van-popup",{staticClass:"agreement-popup",style:{height:"100%"},attrs:{closeable:"",position:"bottom"},model:{value:t.openStatementView,callback:function(e){t.openStatementView=e},expression:"openStatementView"}},[n("div",{staticClass:"agreement"},[n("h2",{staticClass:"text-center"},[t._v("赛事免责声明")]),n("div",[t._v(" 1、本人自愿报名并参与全民应球举办的各项赛事，承诺严格遵守组织方制定的各项规则和参赛要求，并承担由于违反规定所造成损失的全部责任。 ")]),n("div",[t._v(" 2、我自愿报名参加本次比赛，并确认本人具有参加本次比赛相应的民事行为能力和民事责任能力,同时已获得监护人的同意； ")]),n("div",[t._v(" 3、我确认已认真阅读了官方就选手参加本次比赛可能发生的一切风险（包括但不限于因参加本次比赛所可能产生的人身伤亡风险）的提示，我在此明确同意将自行承担参加本次比赛所可能存在的风险和责任； ")]),n("div",[t._v(" 4、我承诺已通过正规医疗机构进行体检，并结合检查报告进行自我评估，确认自己的身体状况能够适应于本次比赛中的相关运动，已为参赛做好准备，承诺愿意承担参赛可能带来的一切风险（包括但不限于因参加本次比赛所可能产生的人身伤亡风险）； ")]),n("div",[t._v(" 5、 我承诺，因参加本次比赛以及参赛全过程中所发生的人身伤害、局部或永久性伤残、死亡、医疗或住院费用、财产损坏、任何形式的盗窃或财产损失等事项，由我本人承担全部责任，与全民应球官方无关，对此不承担任何形式的责任； ")]),n("div",[t._v(" 6、我承诺授权赛事组办方及其指定媒体无偿使用本人的肖像、姓名、声音等用于赛事的宣传与推广； ")]),n("div",[t._v(" 7、我接受组办方在比赛期间提供的现场急救性质的医务治疗，但在医院救治等发生的相关费用由我自理； ")]),n("div",[t._v(" 8、我承诺在参赛过程中遵守裁判、医疗人员和安保人员的要求，如比赛过程中出现身体不适或其他情况导致无法继续比赛，我承诺承担因本人坚持比赛所产生的全部责任与后果； ")]),n("div",[t._v(" 凡是报名参加者均视为已经阅读、理解并接受以上几点免责声明，该声明书自报名到达现场后生效至赛事结束时终止。 ")])])])],1)}),[],!1,null,null,null);e.default=c.exports},"22ca":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o}));var r=n("751a"),a=function(t){return r.a.get("/venue/involve",t)},i=function(t){return r.a.get("/venue/entry-list",t)},o=function(t){return r.a.get("/venue/get-info",t)}},4127:function(t,e,n){"use strict";function r(t,e,n,i,o,s,l,u,p,f,d,v){var m=t;if("function"==typeof l)m=l(e,m);else if(m instanceof Date)m=f(m);else if(null===m){if(i)return s&&!v?s(e,c.encoder):e;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||a.isBuffer(m))return s?[d(v?e:s(e,c.encoder))+"="+d(s(m,c.encoder))]:[d(e)+"="+d(String(m))];var y,g=[];if(void 0===m)return g;if(Array.isArray(l))y=l;else{var h=Object.keys(m);y=u?h.sort(u):h}for(var b=0;b<y.length;++b){var _=y[b];o&&null===m[_]||(g=Array.isArray(m)?g.concat(r(m[_],n(e,_),n,i,o,s,l,u,p,f,d,v)):g.concat(r(m[_],e+(p?"."+_:"["+_+"]"),n,i,o,s,l,u,p,f,d,v)))}return g}var a=n("d2334"),i=n("b313"),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var n=t,s=e?a.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===s.delimiter?c.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:c.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:c.skipNulls,f="boolean"==typeof s.encode?s.encode:c.encode,d="function"==typeof s.encoder?s.encoder:c.encoder,v="function"==typeof s.sort?s.sort:null,m=void 0!==s.allowDots&&s.allowDots,y="function"==typeof s.serializeDate?s.serializeDate:c.serializeDate,g="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:c.encodeValuesOnly;if(void 0===s.format)s.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,s.format))throw new TypeError("Unknown format option provided.");var h,b,_=i.formatters[s.format];"function"==typeof s.filter?n=(b=s.filter)("",n):Array.isArray(s.filter)&&(h=b=s.filter);var j,O=[];if("object"!=typeof n||null===n)return"";j=s.arrayFormat in o?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var k=o[j];h=h||Object.keys(n),v&&h.sort(v);for(var x=0;x<h.length;++x){var w=h[x];p&&null===n[w]||(O=O.concat(r(n[w],w,k,u,p,f?d:null,b,v,m,y,_,g)))}var C=O.join(l),D=!0===s.addQueryPrefix?"?":"";return 0<C.length?D+C:""}},4328:function(t,e,n){"use strict";var r=n("4127"),a=n("9e6a"),i=n("b313");t.exports={formats:i,parse:a,stringify:r}},"751a":function(t,e,n){"use strict";n("d3b7");var r=n("bb9a"),a=n("4328"),i=n.n(a),o={get:function(t,e){return Object(r.a)({url:t,method:"get",params:e})},post:function(t,e,n){return Object(r.a)({url:t,method:"post",params:e,data:n})},postQs:function(t,e){return Object(r.a)({url:t,method:"post",data:i.a.stringify(e)})},patch:function(t,e){return Object(r.a)({url:t,method:"patch",data:e})},put:function(t,e,n){return new Promise((function(a,i){Object(r.a)({url:t,method:"put",params:e,data:n}).then((function(t){a(t.data)})).catch((function(t){i(t)}))}))}};e.a=o},"9e6a":function(t,e,n){"use strict";function r(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(r),s=o?r.slice(0,o.index):r,c=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;c.push(s)}for(var l=0;null!==(o=a.exec(r))&&l<n.depth;){if(l+=1,!n.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+r.slice(o.index)+"]"),function(t,e,n){for(var r=e,a=t.length-1;0<=a;--a){var i,o=t[a];if("[]"===o)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);!isNaN(c)&&o!==s&&String(c)===s&&0<=c&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=r:i[s]=r}r=i}return r}(c,e,n)}}var a=n("d2334"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var n=e?a.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||a.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,a),c=0;c<s.length;++c){var l,u,p=s[c],f=p.indexOf("]="),d=-1===f?p.indexOf("="):f+1;u=-1===d?(l=e.decoder(p,o.decoder),e.strictNullHandling?null:""):(l=e.decoder(p.slice(0,d),o.decoder),e.decoder(p.slice(d+1),o.decoder)),i.call(n,l)?n[l]=[].concat(n[l]).concat(u):n[l]=u}return n}(t,n):t,c=n.plainObjects?Object.create(null):{},l=Object.keys(s),u=0;u<l.length;++u){var p=l[u],f=r(p,s[p],n);c=a.merge(c,f,n)}return a.compact(c)}},b313:function(t,e,n){"use strict";var r=String.prototype.replace,a=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,a,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},c24f:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return i})),n.d(e,"j",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p})),n.d(e,"i",(function(){return f})),n.d(e,"d",(function(){return d}));var r=n("751a"),a=function(t){return r.a.get("/user/detail",t)},i=function(t,e){return r.a.put("/user/name",t,e)},o=function(t,e){return r.a.put("/user/sex",t,e)},s=function(t,e){return r.a.put("/user/birthday",t,e)},c=function(t,e){return r.a.put("/user/address",t,e)},l=function(t,e){return r.a.put("/user/info",t,e)},u=function(t){return r.a.get("/site/contact",t)},p=function(t){return r.a.get("/site/contact-info",t)},f=function(t){return r.a.get("/user/record",t)},d=function(t,e){return r.a.post("/user/feedback",t,e)}},d2334:function(t,e,n){"use strict";function r(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n}var a=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:r,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var a=e[r],i=a.obj[a.prop],o=Object.keys(i),s=0;s<o.length;++s){var c=o[s],l=i[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:i,prop:c}),n.push(l))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],a=0;a<e.length;++a)void 0!==e[a]&&r.push(e[a]);n.obj[n.prop]=r}}return e}(e)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var a=e.charCodeAt(r);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?n+=e.charAt(r):a<128?n+=i[a]:a<2048?n+=i[192|a>>6]+i[128|63&a]:a<55296||57344<=a?n+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(r)),n+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];!i.plainObjects&&!i.allowPrototypes&&a.call(Object.prototype,n)||(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var o=e;return Array.isArray(e)&&!Array.isArray(n)&&(o=r(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach((function(n,r){a.call(e,r)?e[r]&&"object"==typeof e[r]?e[r]=t(e[r],n,i):e.push(n):e[r]=n})),e):Object.keys(n).reduce((function(e,r){var o=n[r];return a.call(e,r)?e[r]=t(e[r],o,i):e[r]=o,e}),o)}}}}]);