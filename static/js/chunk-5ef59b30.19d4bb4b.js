(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ef59b30"],{"1d8f":function(t,e,n){"use strict";n.r(e),n("ac1f"),n("466d");var r=n("c24f"),a=n("751a"),o={name:"walletpay",data:function(){return{code:"",userInfo:"",walletItem:[5,10,20,50,100,200],welletVal:5,payTypeId:"0",out_trade_no:"",signature:{}}},mounted:function(){this.code=this.$getQueryVariable("code")||"",this.getUserInfo()},methods:{getUserInfo:function(){var t=this;Object(r.g)().then((function(e){var n=e.data;t.userInfo=n})).catch((function(t){}))},setWalletpay:function(){switch(this.payTypeId){case"0":this.onWxPay();break;case"1":this.onAliPay()}},onWellet:function(t){this.welletVal=t},onWxJsSdk:function(){var t,e,n=this,r=this,o="wx61fd819a116fc903",i=encodeURIComponent("http://yingqiu23.com/#/wallet"),c="snsapi_base";this.code?(t={},e={user_id:this.userInfo.id,total_amount:this.welletVal,code:this.code},a.a.post("http://yingqiu23.com:8082/wechat/jsapi",t,e)).then((function(t){if(t.success){var e=t.data;n.signature=e.signature,"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:o,timeStamp:n.signature.timeStamp,nonceStr:n.signature.nonceStr,package:n.signature.package,signType:n.signature.signType,paySign:n.signature.paySign},(function(t){"get_brand_wcpay_request:ok"===t.err_msg&&(r.getUserInfo(),r.$Toast({message:"支付成功",position:"bottom"}),r.code="",r.$Cookies.remove("code"))}))}else window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+i+"&response_type=code&scope="+c+"&state=123#wechat_redirect"})).catch((function(t){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+i+"&response_type=code&scope="+c+"&state=123#wechat_redirect"})):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+i+"&response_type=code&scope="+c+"&state=123#wechat_redirect"},onWxPay:function(){var t,e,n=this,r=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.out_trade_no="",(t={},e={user_id:this.userInfo.user_id,total_amount:this.welletVal},a.a.post("http://yingqiu23.com:8082/wechat/pay",t,e)).then((function(t){var e=t.data;r.clear(),n.out_trade_no=e.out_trade_no,n.payConfirm(e),window.location.href=e.mweb_url+"&redirect_url="+encodeURI("http://yingqiu23.com/#/wallet")})).catch((function(t){}))},getWxPayResult:function(){var t,e=this;(t={out_trade_no:this.out_trade_no},a.a.get("http://yingqiu23.com:8082/wechat/pay-result",t)).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},onAliPay:function(){var t=this,e=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.$axios({method:"post",url:"http://yingqiu23.com:8082/alipay/pay",params:{access_token:this.userInfo.access_token},data:{user_id:this.userInfo.user_id,total_amount:this.welletVal}}).then((function(n){e.clear();var r=n.data;t.payConfirm();var a=document.createElement("div");a.innerHTML=r,document.body.appendChild(a),t.out_trade_no=JSON.parse(document.getElementsByName("biz_content")[0].value).out_trade_no,document.forms[0].submit(),document.body.removeChild(a)})).catch((function(t){}))},getAliPayResult:function(){var t,e=this;(t={out_trade_no:this.out_trade_no},a.a.get("http://yingqiu23.com:8082/alipay/pay-result",t)).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},payConfirm:function(){var t=this;this.$dialog.confirm({className:"pay-confirm",title:"请确认支付是否完成",confirmButtonText:"支付遇到问题，重新支付",cancelButtonText:"已完成支付"}).then((function(){t.out_trade_no=""})).catch((function(){switch(t.payTypeId){case"0":t.getWxPayResult();break;case"1":t.getAliPayResult()}}))}},watch:{},computed:{isWx:function(){var t=!1;return navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&(t="micromessenger"===navigator.userAgent.toLowerCase().match(/MicroMessenger/i)[0]),t}}},i=n("2877"),c=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("van-nav-bar",{staticClass:"nav",attrs:{fixed:"",title:"我的钱包","left-arrow":"","right-text":"账单"},on:{"click-left":t.$back,"click-right":function(e){return t.$router.push({path:"/wallet/list"})}}}),n("div",{staticClass:"page"},[n("div",{staticClass:"page-main"},[n("div",{staticClass:"count"},[n("div",{staticClass:"label"},[t._v(" 球币余额 ")]),n("div",{staticClass:"value",staticStyle:{height:"25px"}},[t._v(" "+t._s(t.userInfo.invented)+" "),n("div",{staticClass:"small"})])]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"球币充值"}},[n("div",{staticClass:"wallet"},[n("van-grid",{attrs:{"column-num":3}},t._l(t.walletItem,(function(e,r){return n("van-grid-item",{key:r,staticClass:"wallet-item",class:{active:e===t.welletVal},on:{click:function(n){return t.onWellet(e)}}},[n("div",{staticClass:"label"},[t._v(t._s(e)+" 球币")]),n("div",{staticClass:"small"},[t._v(t._s(e)+" 元")])])})),1)],1)]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"支付方式"}},[n("van-radio-group",{staticClass:"paytype",model:{value:t.payTypeId,callback:function(e){t.payTypeId=e},expression:"payTypeId"}},[n("van-cell-group",[n("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="0"}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"paytype-icon paytype-icon-wechat"}),t._v(" 微信 ")]},proxy:!0},{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"0"}})]},proxy:!0}])}),t.isWx?t._e():n("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="1"}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"paytype-icon paytype-icon-zfb"}),t._v(" 支付宝 ")]},proxy:!0},{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"1"}})]},proxy:!0}],null,!1,534211696)})],1)],1)],1),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"温馨提示"}},[n("div",{staticClass:"panel-content"},[n("div",{staticClass:"agreement"},[n("div",{staticClass:"fs-12"},[t._v(" 1、充值的球币可直接用于赛事报名，不可转让或者提现。 ")]),n("div",{staticClass:"fs-12"},[t._v(" 2、充值过程中，如遇到问题，请至“我的”-“联系客服”点击联系客服。 ")])])])])],1),n("div",{staticClass:"page-foot"},[t.isWx?[n("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.onWxJsSdk}},[t._v("确认支付 "+t._s(t.welletVal)+" 元")])]:[n("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.setWalletpay}},[t._v("确认支付 "+t._s(t.welletVal)+" 元")])]],2)])],1)}),[],!1,null,null,null);e.default=c.exports},4127:function(t,e,n){"use strict";function r(t,e,n,o,i,c,l,u,p,d,f,y){var h=t;if("function"==typeof l)h=l(e,h);else if(h instanceof Date)h=d(h);else if(null===h){if(o)return c&&!y?c(e,s.encoder):e;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||a.isBuffer(h))return c?[f(y?e:c(e,s.encoder))+"="+f(c(h,s.encoder))]:[f(e)+"="+f(String(h))];var m,g=[];if(void 0===h)return g;if(Array.isArray(l))m=l;else{var v=Object.keys(h);m=u?v.sort(u):v}for(var b=0;b<m.length;++b){var w=m[b];i&&null===h[w]||(g=Array.isArray(h)?g.concat(r(h[w],n(e,w),n,o,i,c,l,u,p,d,f,y)):g.concat(r(h[w],e+(p?"."+w:"["+w+"]"),n,o,i,c,l,u,p,d,f,y)))}return g}var a=n("d2334"),o=n("b313"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},c=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var n=t,c=e?a.assign({},e):{};if(null!==c.encoder&&void 0!==c.encoder&&"function"!=typeof c.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===c.delimiter?s.delimiter:c.delimiter,u="boolean"==typeof c.strictNullHandling?c.strictNullHandling:s.strictNullHandling,p="boolean"==typeof c.skipNulls?c.skipNulls:s.skipNulls,d="boolean"==typeof c.encode?c.encode:s.encode,f="function"==typeof c.encoder?c.encoder:s.encoder,y="function"==typeof c.sort?c.sort:null,h=void 0!==c.allowDots&&c.allowDots,m="function"==typeof c.serializeDate?c.serializeDate:s.serializeDate,g="boolean"==typeof c.encodeValuesOnly?c.encodeValuesOnly:s.encodeValuesOnly;if(void 0===c.format)c.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,c.format))throw new TypeError("Unknown format option provided.");var v,b,w=o.formatters[c.format];"function"==typeof c.filter?n=(b=c.filter)("",n):Array.isArray(c.filter)&&(v=b=c.filter);var _,j=[];if("object"!=typeof n||null===n)return"";_=c.arrayFormat in i?c.arrayFormat:"indices"in c?c.indices?"indices":"repeat":"indices";var O=i[_];v=v||Object.keys(n),y&&v.sort(y);for(var k=0;k<v.length;++k){var x=v[k];p&&null===n[x]||(j=j.concat(r(n[x],x,O,u,p,d?f:null,b,y,h,m,w,g)))}var C=j.join(l),A=!0===c.addQueryPrefix?"?":"";return 0<C.length?A+C:""}},4328:function(t,e,n){"use strict";var r=n("4127"),a=n("9e6a"),o=n("b313");t.exports={formats:o,parse:a,stringify:r}},"751a":function(t,e,n){"use strict";n("d3b7");var r=n("bb9a"),a=n("4328"),o=n.n(a),i={get:function(t,e){return Object(r.a)({url:t,method:"get",params:e})},post:function(t,e,n){return Object(r.a)({url:t,method:"post",params:e,data:n})},postQs:function(t,e){return Object(r.a)({url:t,method:"post",data:o.a.stringify(e)})},patch:function(t,e){return Object(r.a)({url:t,method:"patch",data:e})},put:function(t,e,n){return new Promise((function(a,o){Object(r.a)({url:t,method:"put",params:e,data:n}).then((function(t){a(t.data)})).catch((function(t){o(t)}))}))}};e.a=i},"9e6a":function(t,e,n){"use strict";function r(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),c=i?r.slice(0,i.index):r,s=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;s.push(c)}for(var l=0;null!==(i=a.exec(r))&&l<n.depth;){if(l+=1,!n.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+r.slice(i.index)+"]"),function(t,e,n){for(var r=e,a=t.length-1;0<=a;--a){var o,i=t[a];if("[]"===i)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,s=parseInt(c,10);!isNaN(s)&&i!==c&&String(s)===c&&0<=s&&n.parseArrays&&s<=n.arrayLimit?(o=[])[s]=r:o[c]=r}r=o}return r}(s,e,n)}}var a=n("d2334"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var n=e?a.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||a.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,c=r.split(e.delimiter,a),s=0;s<c.length;++s){var l,u,p=c[s],d=p.indexOf("]="),f=-1===d?p.indexOf("="):d+1;u=-1===f?(l=e.decoder(p,i.decoder),e.strictNullHandling?null:""):(l=e.decoder(p.slice(0,f),i.decoder),e.decoder(p.slice(f+1),i.decoder)),o.call(n,l)?n[l]=[].concat(n[l]).concat(u):n[l]=u}return n}(t,n):t,s=n.plainObjects?Object.create(null):{},l=Object.keys(c),u=0;u<l.length;++u){var p=l[u],d=r(p,c[p],n);s=a.merge(s,d,n)}return a.compact(s)}},b313:function(t,e,n){"use strict";var r=String.prototype.replace,a=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,a,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},c24f:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"j",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p})),n.d(e,"i",(function(){return d})),n.d(e,"d",(function(){return f}));var r=n("751a"),a=function(t){return r.a.get("/user/detail",t)},o=function(t,e){return r.a.put("/user/name",t,e)},i=function(t,e){return r.a.put("/user/sex",t,e)},c=function(t,e){return r.a.put("/user/birthday",t,e)},s=function(t,e){return r.a.put("/user/address",t,e)},l=function(t,e){return r.a.put("/user/info",t,e)},u=function(t){return r.a.get("/site/contact",t)},p=function(t){return r.a.get("/site/contact-info",t)},d=function(t){return r.a.get("/user/record",t)},f=function(t,e){return r.a.post("/user/feedback",t,e)}},d2334:function(t,e,n){"use strict";function r(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n}var a=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:r,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var a=e[r],o=a.obj[a.prop],i=Object.keys(o),c=0;c<i.length;++c){var s=i[c],l=o[s];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(e.push({obj:o,prop:s}),n.push(l))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],a=0;a<e.length;++a)void 0!==e[a]&&r.push(e[a]);n.obj[n.prop]=r}}return e}(e)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var a=e.charCodeAt(r);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?n+=e.charAt(r):a<128?n+=o[a]:a<2048?n+=o[192|a>>6]+o[128|63&a]:a<55296||57344<=a?n+=o[224|a>>12]+o[128|a>>6&63]+o[128|63&a]:(r+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(r)),n+=o[240|a>>18]+o[128|a>>12&63]+o[128|a>>6&63]+o[128|63&a])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];!o.plainObjects&&!o.allowPrototypes&&a.call(Object.prototype,n)||(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=r(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach((function(n,r){a.call(e,r)?e[r]&&"object"==typeof e[r]?e[r]=t(e[r],n,o):e.push(n):e[r]=n})),e):Object.keys(n).reduce((function(e,r){var i=n[r];return a.call(e,r)?e[r]=t(e[r],i,o):e[r]=i,e}),i)}}}}]);