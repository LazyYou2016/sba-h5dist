(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5b8738ff"],{4127:function(t,e,a){"use strict";function r(t,e,a,o,i,s,l,u,d,p,f,v){var g=t;if("function"==typeof l)g=l(e,g);else if(g instanceof Date)g=p(g);else if(null===g){if(o)return s&&!v?s(e,c.encoder):e;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||n.isBuffer(g))return s?[f(v?e:s(e,c.encoder))+"="+f(s(g,c.encoder))]:[f(e)+"="+f(String(g))];var y,h=[];if(void 0===g)return h;if(Array.isArray(l))y=l;else{var m=Object.keys(g);y=u?m.sort(u):m}for(var _=0;_<y.length;++_){var b=y[_];i&&null===g[b]||(h=Array.isArray(g)?h.concat(r(g[b],a(e,b),a,o,i,s,l,u,d,p,f,v)):h.concat(r(g[b],e+(d?"."+b:"["+b+"]"),a,o,i,s,l,u,d,p,f,v)))}return h}var n=a("d2334"),o=a("b313"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},s=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return s.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var a=t,s=e?n.assign({},e):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===s.delimiter?c.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:c.strictNullHandling,d="boolean"==typeof s.skipNulls?s.skipNulls:c.skipNulls,p="boolean"==typeof s.encode?s.encode:c.encode,f="function"==typeof s.encoder?s.encoder:c.encoder,v="function"==typeof s.sort?s.sort:null,g=void 0!==s.allowDots&&s.allowDots,y="function"==typeof s.serializeDate?s.serializeDate:c.serializeDate,h="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:c.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var m,_,b=o.formatters[s.format];"function"==typeof s.filter?a=(_=s.filter)("",a):Array.isArray(s.filter)&&(m=_=s.filter);var k,w=[];if("object"!=typeof a||null===a)return"";k=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var x=i[k];m=m||Object.keys(a),v&&m.sort(v);for(var R=0;R<m.length;++R){var C=m[R];d&&null===a[C]||(w=w.concat(r(a[C],C,x,u,d,p?f:null,_,v,g,y,b,h)))}var L=w.join(l),j=!0===s.addQueryPrefix?"?":"";return 0<L.length?j+L:""}},4328:function(t,e,a){"use strict";var r=a("4127"),n=a("9e6a"),o=a("b313");t.exports={formats:o,parse:n,stringify:r}},4340:function(t,e,a){"use strict";var r=a("892c");a.n(r).a},"59b8":function(t,e,a){"use strict";function r(t){return o.a.get("/period-rank/index",t)}function n(t){return o.a.get("/user/get-peroid-rank",t)}a.r(e);var o=a("751a"),i={name:"ranking",data:function(){return{category:0,rankingTypeId:"技巧赛",rankingTypePicker:!1,rankingTypeItem:[{text:"技巧赛",value:0},{text:"混合投篮",value:1},{text:"三分",value:2}],refreshing:!1,disabled:!1,lastLoad:!0,toggle:!0,periodRule:{},ranksDatas:[],own:{},sequence:"",sequenceLast:1,periodRuleLast:{},ranksDatasLast:[],ownLast:{},dialogView:!1,recordView:!1,recordDataAll:[]}},created:function(){},activated:function(){this.getRankIndex(),this.getPeroidRank()},mounted:function(){},methods:{onChangeRanking:function(t){this.rankingTypeId=t.text,this.category=t.value,this.rankingTypePicker=!1},getRankIndex:function(){var t=this;r({category:this.category}).then((function(e){var a=e.data;t.periodRule=a.period_rule,t.ranksDatas=a.ranks,t.sequence=a.period_rule.sequence,t.getRankIndexLast(),t.getPeroidRankLast()})).catch((function(t){}))},getPeroidRank:function(){var t=this;n({category:this.category}).then((function(e){var a=e.data;t.own=0!==a.length?a:{user_name:"-",match_nums:"-",match_time:"--:--:--",rownum:"-"}})).catch((function(t){}))},getRankIndexLast:function(){var t=this;r({category:this.category,sequence:this.sequence-this.sequenceLast}).then((function(e){var a=e.data;t.periodRuleLast=a.period_rule,t.ranksDatasLast=a.ranks,t.refreshing=!1})).catch((function(t){}))},getPeroidRankLast:function(){var t=this;n({category:this.category,sequence:this.sequence-this.sequenceLast}).then((function(e){var a=e.data;t.ownLast=0!==a.length?a:{user_name:"-",match_nums:"-",match_time:"--:--:--",rownum:"-"}})).catch((function(t){}))},onToggle:function(){this.lastLoad&&(this.lastLoad=!1),this.toggle=!this.toggle},openDialog:function(){this.dialogView=!0},getHeRecord:function(t){var e,a=this;this.recordDataAll=[],this.recordView=!0,(e={category:this.category,user_id:t.user_id,date_start:this.toggle?this.periodRule.date_start:this.periodRuleLast.date_start,date_end:this.toggle?this.periodRule.date_end:this.periodRuleLast.date_end},o.a.get("/period-rank/record",e)).then((function(t){var e=t.data;a.recordDataAll=e})).catch((function(t){}))},onRefresh:function(){this.getRankIndex(),this.getPeroidRank()}},computed:{ranksList:function(){return this.toggle?this.ranksDatas:this.ranksDatasLast}},watch:{recordView:function(t){this.disabled=t},dialogView:function(t){this.disabled=t},category:function(){this.getRankIndex(),this.getPeroidRank()}}},s=(a("4340"),a("2877")),c=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-pull-refresh",{attrs:{disabled:t.disabled},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("div",{staticClass:"main main-tabbar main-top"},[a("van-nav-bar",{staticClass:"nav nav-transparent",attrs:{title:"排行榜"},on:{"click-right":t.onToggle}},[a("template",{slot:"right"},[a("div",{staticClass:"ranking-toggle"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"switch"}}),a("div",[t._v(" "+t._s(t.toggle?"上赛季":"本赛季")+" ")])],1)])],2),a("div",{staticClass:"ranking-bg"},[a("div",{staticClass:"ranking card"},[a("div",{staticClass:"ranking-main"},[a("div",{staticClass:"ranking-type van-dropdown-menu__title",on:{click:function(e){t.rankingTypePicker=!0}}},[a("van-tag",{attrs:{type:"primary"}},[t._v(t._s(t.rankingTypeId))])],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.rankingTypePicker,callback:function(e){t.rankingTypePicker=e},expression:"rankingTypePicker"}},[a("van-picker",{attrs:{columns:t.rankingTypeItem,"show-toolbar":""},on:{confirm:t.onChangeRanking,cancel:function(e){t.rankingTypePicker=!1}}})],1),a("div",{staticClass:"ranking-icon",on:{click:t.openDialog}},[a("van-icon",{attrs:{"class-prefix":"icon",name:"rule"}})],1),a("div",{staticClass:"lable"},[t._v("累计奖池(元)")]),a("div",{staticClass:"value"},[t._v(t._s(t.toggle?t.periodRule.amount:t.periodRuleLast.amount))]),a("div",{staticClass:"ranking-quarter"},[a("div",{staticClass:"label"},[t._v(t._s(t.toggle?t.periodRule.title:t.periodRuleLast.title)+" "+t._s(t.toggle?"本赛季":"上赛季")+"剩余")]),a("div",{staticClass:"date-container"},[a("div",{staticClass:"date"},[t._v(t._s(t.toggle?t.periodRule.date_start:t.periodRuleLast.date_start))]),a("div",{staticClass:"ranking-countdown"},["已结束"===(t.toggle?t.periodRule.surplus_day:t.periodRuleLast.surplus_day)?[t._v(t._s(t.periodRuleLast.surplus_day))]:a("div",{staticClass:"day"},[a("span",[t._v(t._s(t.toggle?t.periodRule.surplus_day:t.periodRuleLast.surplus_day)+" ")]),t._v("天 ")])],2),a("div",{staticClass:"date"},[t._v(t._s(t.toggle?t.periodRule.date_end:t.periodRuleLast.date_end))])])])],1)])]),a("card",{staticClass:"rank-own"},[a("van-row",{staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"6"}}),a("van-col",{attrs:{span:"3"}},[t._v("场次")]),a("van-col",{attrs:{span:"6"}},[t._v("最佳战绩")]),a("van-col",{attrs:{span:"9"}},[t._v(" 当前排名 ")])],1),a("van-row",{staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{staticClass:"rank-list-name",attrs:{span:"6"}},[t._v(t._s(t.toggle?t.own.user_name:t.ownLast.user_name))]),a("van-col",{attrs:{span:"3"}},[t._v(t._s(t.toggle?t.own.match_nums:t.ownLast.match_nums))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(t.toggle?t.own.match_time:t.ownLast.match_time))]),a("van-col",{attrs:{span:"9"}},[a("div",{staticClass:"rank-own-icon m-auto"},[t._v(" "+t._s(t.toggle?t.own.rownum:t.ownLast.rownum)+" ")])])],1)],1),a("div",{staticClass:"rank-list m-t-sm"},[a("div",{staticClass:"list-head"},[a("van-row",{staticClass:"cell-col text-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"7"}},[t._v(" 昵称 ")]),a("van-col",{attrs:{span:"5"}},[t._v("场次")]),a("van-col",{attrs:{span:"6"}},[t._v("最佳战绩")]),a("van-col",{attrs:{span:"6"}},[t._v("排名")])],1)],1),t._l(t.ranksList,(function(e,r){return a("van-row",{key:r,staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"2"}},[a("van-image",{staticClass:"user-head-sign",attrs:{src:e.avatar?t.$UrlAvatar+e.avatar:t.$imgDefault,round:"",type:"cover"}})],1),a("van-col",{staticClass:"rank-list-name",attrs:{span:"5"}},[t._v(t._s(e.user_name))]),a("van-col",{attrs:{span:"5"},on:{click:function(a){return t.getHeRecord(e)}}},[t._v(t._s(e.match_nums))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(e.match_time))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(e.rownum))])],1)}))],2),a("van-dialog",{staticClass:"dialog-full",attrs:{"confirm-button-text":"关闭"},model:{value:t.dialogView,callback:function(e){t.dialogView=e},expression:"dialogView"}},[a("div",{staticClass:"dialog-main"},[t.toggle?[a("div",{},[t._v(" 规则 ")]),a("div",{domProps:{innerHTML:t._s(t.periodRule.regulation)}}),a("div",{},[t._v(" 奖励 ")]),a("div",{domProps:{innerHTML:t._s(t.periodRule.reward)}})]:[a("div",{},[t._v(" 规则 ")]),a("div",{domProps:{innerHTML:t._s(t.periodRuleLast.regulation)}}),a("div",{},[t._v(" 奖励 ")]),a("div",{domProps:{innerHTML:t._s(t.periodRuleLast.reward)}})]],2)]),a("van-dialog",{staticClass:"dialog-full",attrs:{"confirm-button-text":"关闭"},model:{value:t.recordView,callback:function(e){t.recordView=e},expression:"recordView"}},[a("div",{staticClass:"dialog-rank"},[a("div",{staticClass:"rank-list"},[a("div",{staticClass:"list-head"},[a("van-row",{staticClass:"cell-col text-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"7"}},[t._v("比赛名称")]),a("van-col",{attrs:{span:"7"}},[t._v("比赛日期")]),a("van-col",{attrs:{span:"6"}},[t._v("成绩")]),a("van-col",{attrs:{span:"4"}},[t._v("排名")])],1)],1),a("div",{staticClass:"dialog-rank-main"},t._l(t.recordDataAll,(function(e,r){return a("van-row",{key:r,staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{staticClass:"rank-list-name",attrs:{span:"7"}},[t._v(t._s(e.match_name))]),a("van-col",{attrs:{span:"7"}},[t._v(t._s(e.match_date))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(e.match_time))]),a("van-col",{attrs:{span:"4"}},[t._v(t._s(e.rank))])],1)})),1)])])])],1)])}),[],!1,null,"d0a2cfbc",null);e.default=c.exports},"751a":function(t,e,a){"use strict";a("d3b7");var r=a("bb9a"),n=a("4328"),o=a.n(n),i={get:function(t,e){return Object(r.a)({url:t,method:"get",params:e})},post:function(t,e,a){return Object(r.a)({url:t,method:"post",params:e,data:a})},postQs:function(t,e){return Object(r.a)({url:t,method:"post",data:o.a.stringify(e)})},patch:function(t,e){return Object(r.a)({url:t,method:"patch",data:e})},put:function(t,e,a){return new Promise((function(n,o){Object(r.a)({url:t,method:"put",params:e,data:a}).then((function(t){n(t.data)})).catch((function(t){o(t)}))}))}};e.a=i},"892c":function(t,e,a){},"9e6a":function(t,e,a){"use strict";function r(t,e,a){if(t){var r=a.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),s=i?r.slice(0,i.index):r,c=[];if(s){if(!a.plainObjects&&o.call(Object.prototype,s)&&!a.allowPrototypes)return;c.push(s)}for(var l=0;null!==(i=n.exec(r))&&l<a.depth;){if(l+=1,!a.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),function(t,e,a){for(var r=e,n=t.length-1;0<=n;--n){var o,i=t[n];if("[]"===i)o=(o=[]).concat(r);else{o=a.plainObjects?Object.create(null):{};var s="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,c=parseInt(s,10);!isNaN(c)&&i!==s&&String(c)===s&&0<=c&&a.parseArrays&&c<=a.arrayLimit?(o=[])[c]=r:o[s]=r}r=o}return r}(c,e,a)}}var n=a("d2334"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var a=e?n.assign({},e):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:i.delimiter,a.depth="number"==typeof a.depth?a.depth:i.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:i.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:i.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:i.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:i.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:i.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:i.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:i.strictNullHandling,""===t||null==t)return a.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var a={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,n),c=0;c<s.length;++c){var l,u,d=s[c],p=d.indexOf("]="),f=-1===p?d.indexOf("="):p+1;u=-1===f?(l=e.decoder(d,i.decoder),e.strictNullHandling?null:""):(l=e.decoder(d.slice(0,f),i.decoder),e.decoder(d.slice(f+1),i.decoder)),o.call(a,l)?a[l]=[].concat(a[l]).concat(u):a[l]=u}return a}(t,a):t,c=a.plainObjects?Object.create(null):{},l=Object.keys(s),u=0;u<l.length;++u){var d=l[u],p=r(d,s[d],a);c=n.merge(c,p,a)}return n.compact(c)}},b313:function(t,e,a){"use strict";var r=String.prototype.replace,n=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,n,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d2334:function(t,e,a){"use strict";function r(t,e){for(var a=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(a[r]=t[r]);return a}var n=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:r,assign:function(t,e){return Object.keys(e).reduce((function(t,a){return t[a]=e[a],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],a=[],r=0;r<e.length;++r)for(var n=e[r],o=n.obj[n.prop],i=Object.keys(o),s=0;s<i.length;++s){var c=i[s],l=o[c];"object"==typeof l&&null!==l&&-1===a.indexOf(l)&&(e.push({obj:o,prop:c}),a.push(l))}return function(t){for(var e;t.length;){var a=t.pop();if(e=a.obj[a.prop],Array.isArray(e)){for(var r=[],n=0;n<e.length;++n)void 0!==e[n]&&r.push(e[n]);a.obj[a.prop]=r}}return e}(e)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),a="",r=0;r<e.length;++r){var n=e.charCodeAt(r);45===n||46===n||95===n||126===n||48<=n&&n<=57||65<=n&&n<=90||97<=n&&n<=122?a+=e.charAt(r):n<128?a+=o[n]:n<2048?a+=o[192|n>>6]+o[128|63&n]:n<55296||57344<=n?a+=o[224|n>>12]+o[128|n>>6&63]+o[128|63&n]:(r+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),a+=o[240|n>>18]+o[128|n>>12&63]+o[128|n>>6&63]+o[128|63&n])}return a},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,a,o){if(!a)return e;if("object"!=typeof a){if(Array.isArray(e))e.push(a);else{if("object"!=typeof e)return[e,a];!o.plainObjects&&!o.allowPrototypes&&n.call(Object.prototype,a)||(e[a]=!0)}return e}if("object"!=typeof e)return[e].concat(a);var i=e;return Array.isArray(e)&&!Array.isArray(a)&&(i=r(e,o)),Array.isArray(e)&&Array.isArray(a)?(a.forEach((function(a,r){n.call(e,r)?e[r]&&"object"==typeof e[r]?e[r]=t(e[r],a,o):e.push(a):e[r]=a})),e):Object.keys(a).reduce((function(e,r){var i=a[r];return n.call(e,r)?e[r]=t(e[r],i,o):e[r]=i,e}),i)}}}}]);