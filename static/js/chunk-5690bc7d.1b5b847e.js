(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5690bc7d"],{4127:function(t,e,a){"use strict";function r(t,e,a,s,o,i,l,u,d,f,p,v){var m=t;if("function"==typeof l)m=l(e,m);else if(m instanceof Date)m=f(m);else if(null===m){if(s)return i&&!v?i(e,c.encoder):e;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||n.isBuffer(m))return i?[p(v?e:i(e,c.encoder))+"="+p(i(m,c.encoder))]:[p(e)+"="+p(String(m))];var h,g=[];if(void 0===m)return g;if(Array.isArray(l))h=l;else{var y=Object.keys(m);h=u?y.sort(u):y}for(var b=0;b<h.length;++b){var _=h[b];o&&null===m[_]||(g=Array.isArray(m)?g.concat(r(m[_],a(e,_),a,s,o,i,l,u,d,f,p,v)):g.concat(r(m[_],e+(d?"."+_:"["+_+"]"),a,s,o,i,l,u,d,f,p,v)))}return g}var n=a("d2334"),s=a("b313"),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},i=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return i.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var a=t,i=e?n.assign({},e):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===i.delimiter?c.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:c.strictNullHandling,d="boolean"==typeof i.skipNulls?i.skipNulls:c.skipNulls,f="boolean"==typeof i.encode?i.encode:c.encode,p="function"==typeof i.encoder?i.encoder:c.encoder,v="function"==typeof i.sort?i.sort:null,m=void 0!==i.allowDots&&i.allowDots,h="function"==typeof i.serializeDate?i.serializeDate:c.serializeDate,g="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:c.encodeValuesOnly;if(void 0===i.format)i.format=s.default;else if(!Object.prototype.hasOwnProperty.call(s.formatters,i.format))throw new TypeError("Unknown format option provided.");var y,b,_=s.formatters[i.format];"function"==typeof i.filter?a=(b=i.filter)("",a):Array.isArray(i.filter)&&(y=b=i.filter);var w,k=[];if("object"!=typeof a||null===a)return"";w=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var C=o[w];y=y||Object.keys(a),v&&y.sort(v);for(var j=0;j<y.length;++j){var O=y[j];d&&null===a[O]||(k=k.concat(r(a[O],O,C,u,d,f?p:null,b,v,m,h,_,g)))}var x=k.join(l),D=!0===i.addQueryPrefix?"?":"";return 0<x.length?D+x:""}},4328:function(t,e,a){"use strict";var r=a("4127"),n=a("9e6a"),s=a("b313");t.exports={formats:s,parse:n,stringify:r}},5114:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return l}));var r=a("751a"),n=function(t){return r.a.get("/match/carousel",t)},s=function(t){return r.a.get("/match/index",t)},o=function(t){return r.a.get("/match/venues",t)},i=function(t){return r.a.get("/match/regulation",t)},c=function(t){return r.a.get("/match/reward",t)},l=function(t){return r.a.get("/match/rank",t)}},"751a":function(t,e,a){"use strict";a("d3b7");var r=a("bb9a"),n=a("4328"),s=a.n(n),o={get:function(t,e){return Object(r.a)({url:t,method:"get",params:e})},post:function(t,e,a){return Object(r.a)({url:t,method:"post",params:e,data:a})},postQs:function(t,e){return Object(r.a)({url:t,method:"post",data:s.a.stringify(e)})},patch:function(t,e){return Object(r.a)({url:t,method:"patch",data:e})},put:function(t,e,a){return new Promise((function(n,s){Object(r.a)({url:t,method:"put",params:e,data:a}).then((function(t){n(t.data)})).catch((function(t){s(t)}))}))}};e.a=o},"9e6a":function(t,e,a){"use strict";function r(t,e,a){if(t){var r=a.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(r),i=o?r.slice(0,o.index):r,c=[];if(i){if(!a.plainObjects&&s.call(Object.prototype,i)&&!a.allowPrototypes)return;c.push(i)}for(var l=0;null!==(o=n.exec(r))&&l<a.depth;){if(l+=1,!a.plainObjects&&s.call(Object.prototype,o[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(o[1])}return o&&c.push("["+r.slice(o.index)+"]"),function(t,e,a){for(var r=e,n=t.length-1;0<=n;--n){var s,o=t[n];if("[]"===o)s=(s=[]).concat(r);else{s=a.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(i,10);!isNaN(c)&&o!==i&&String(c)===i&&0<=c&&a.parseArrays&&c<=a.arrayLimit?(s=[])[c]=r:s[i]=r}r=s}return r}(c,e,a)}}var n=a("d2334"),s=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var a=e?n.assign({},e):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"==typeof a.depth?a.depth:o.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===t||null==t)return a.plainObjects?Object.create(null):{};for(var i="string"==typeof t?function(t,e){for(var a={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=e.parameterLimit===1/0?void 0:e.parameterLimit,i=r.split(e.delimiter,n),c=0;c<i.length;++c){var l,u,d=i[c],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;u=-1===p?(l=e.decoder(d,o.decoder),e.strictNullHandling?null:""):(l=e.decoder(d.slice(0,p),o.decoder),e.decoder(d.slice(p+1),o.decoder)),s.call(a,l)?a[l]=[].concat(a[l]).concat(u):a[l]=u}return a}(t,a):t,c=a.plainObjects?Object.create(null):{},l=Object.keys(i),u=0;u<l.length;++u){var d=l[u],f=r(d,i[d],a);c=n.merge(c,f,a)}return n.compact(c)}},"9f50":function(t,e,a){"use strict";a.r(e),a("99af"),a("4160"),a("d81d"),a("0d03"),a("b0c0"),a("a9e3"),a("e25e"),a("ac1f"),a("466d"),a("159b");var r=a("fa7d"),n=a("5114"),s={name:"matchList",props:{datas:{type:Array}},computed:{},methods:{goType:function(t){switch(t.ticket_status){case 0:this.$router.push({path:"/match/signUp",query:{matchId:this.$route.query.id,venueId:t.id,name:t.name}});break;case 2:this.$Toast({message:"报名已满",position:"bottom"});break;case 1:case 3:this.$router.push({path:"/match/end",query:{matchId:this.$route.query.id,venueId:t.id,name:t.name}})}}}},o=a("2877"),i={name:"match",data:function(){return{matchId:this.$route.query.id,pageName:this.$route.query.name,matchActive:!1,tabActive:0,matchInfo:{time:null,date:null,countDown:null,countDownType:!0},listLoading:!1,listFinished:!1,refreshing:!1,listPage:1,pageCount:1,venues:[],regulation:"",reward:"",recordRefreshing:!1,recordHead:[],userRecordData:null,recordData:[]}},created:function(){},components:{matchHome:Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0!==t.datas.length?t._l(t.datas,(function(e,r){return a("van-panel",{key:r,staticClass:"cell-list cell-list-match",on:{click:function(a){return t.goType(e)}}},[a("van-row",[a("van-col",{attrs:{span:"8"}},[a("van-image",{attrs:{src:t.$UrlUploads+e.photo_url,type:"contain"}})],1),a("van-col",{attrs:{span:"16"}},[a("div",{staticClass:"title"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"content"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"location"}}),t._v(" "+t._s(e.address)+" ")],1),a("van-row",{staticClass:"tag-container m-t-sm"},[a("van-col",{attrs:{span:"15"}},[a("div",{staticClass:"text-primary"},[t._v(t._s(e.ticket)+" "),a("span",{staticClass:"text-small"},[t._v("球币")]),a("div",{staticClass:"text-small"},[t._v("(包含场地费、裁判费)")])])]),a("van-col",{staticClass:"text-right",attrs:{span:"9"}},[0===e.ticket_status?a("van-tag",{attrs:{type:"primary",size:"medium"}},[t._v("报名进行中")]):1===e.ticket_status?a("van-tag",{attrs:{size:"medium"}},[t._v("报名已结束")]):2===e.ticket_status?a("van-tag",{attrs:{size:"medium"}},[t._v("报名已满")]):3===e.ticket_status?a("van-tag",{attrs:{size:"medium"}},[t._v("比赛已结束")]):t._e()],1)],1)],1)],1)],1)})):[a("van-empty",{attrs:{description:"暂无球馆"}})]],2)}),[],!1,null,null,null).exports},methods:{getMatchVenues:function(){var t=this;Object(n.f)({id:this.matchId,page:this.listPage}).then((function(e){var a=e.data;t.matchInfo=a.match,t.matchInfo.dateNew=a.match.date.substring(0,10),t.matchInfo.time=a.match.date.substring(11,16),t.matchInfo.countDown=new Date(Object(r.b)(a.match.deadline))-parseInt((new Date).getTime())-6e4,3e5<t.matchInfo.countDown?t.matchInfo.countDownType=!0:t.matchInfo.countDownType=!1,0<t.matchInfo.countDown?t.matchActive=!0:t.matchActive=!1,t.venues=t.venues.concat(a.venues),t.venues.forEach((function(e){e.ticket=a.match.ticket,t.matchInfo.dateNew<t.$formatDate("yyyy-MM-dd",new Date)&&(e.ticket_status=3)})),t.listLoading=!1,t.pageCount=a.pages.pageCount,t.listPage+=1,t.refreshing=!1,t.listPage>t.pageCount&&(t.listFinished=!0)})).catch((function(t){})),Object(n.d)({id:this.matchId}).then((function(e){var a=e.data;t.regulation=a.regulation})).catch((function(t){})),Object(n.e)({id:this.matchId}).then((function(e){var a=e.data;t.reward=a.reward})).catch((function(t){})),this.getMatchRank()},getMatchRank:function(){var t=this;Object(n.c)({id:this.matchId}).then((function(e){var a=e.data;t.recordRefreshing=!1;for(var r=["2","1","3"],n=0;n<r.length;n++)for(var s=r[n],o=0;o<a.record.length;o++){var i=a.record[o];s===i.rownum&&t.recordHead.push(i)}if(t.recordData=a.record,t.$Cookies.get("userInfo")){var c={},l=Math.min.apply(null,a.user_record.map((function(t){return t.rownum})));a.user_record.forEach((function(t){Number(t.rownum)===l&&(c=t)})),t.userRecordData=c}})).catch((function(t){}))},countDownEnd:function(){this.venues.forEach((function(t){0===t.ticket_status&&(t.ticket_status=1)}))},onRefresh:function(){this.listPage=1,this.venues=[],this.listFinished=!1,this.listLoading=!0,this.getMatchVenues()},onRecordRefresh:function(){this.recordHead=[],this.userRecordData=null,this.recordData=[],this.getMatchRank()}}},c=Object(o.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main match"},[a("van-nav-bar",{staticClass:"nav",attrs:{title:t.pageName,fixed:"","left-arrow":""},on:{"click-left":t.$back}}),a("div",{staticClass:"match-status"},[a("div",{staticClass:"match-status-left"},[a("div",{staticClass:"match-status-left-label"},[t._v(" 比赛时间 "+t._s(t.matchInfo.time)+" ")]),t._v(" "+t._s(t.matchInfo.dateNew)+" ")]),a("div",{staticClass:"match-status-right"},[t._v(" 距报名截止 "),a("van-count-down",{ref:"countDown",attrs:{format:"HH:mm:ss",time:t.matchInfo.countDown},on:{finish:t.countDownEnd},scopedSlots:t._u([{key:"default",fn:function(e){return[[a("van-tag",{attrs:{type:"danger",size:"large"}},[t._v(t._s(e.days))]),a("span",{staticClass:"text-danger"},[t._v("天")])],a("van-tag",{attrs:{type:"danger",size:"large"}},[t._v(t._s(e.hours))]),a("span",{staticClass:"text-danger"},[t._v(":")]),a("van-tag",{attrs:{type:"danger",size:"large"}},[t._v(t._s(e.minutes))]),[a("span",{staticClass:"text-danger"},[t._v(":")]),a("van-tag",{attrs:{type:"danger",size:"large"}},[t._v(t._s(e.seconds))])]]}}])})],1)]),a("van-tabs",{staticClass:"match-tab tab-icon match-active",attrs:{sticky:"","offset-top":80,animated:""},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[a("van-tab",[a("div",{attrs:{slot:"title"},slot:"title"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"basketball-court"}}),t._v("选择场馆 ")],1),a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.listFinished,"finished-text":0!==t.venues.length?"没有更多了":""},on:{load:t.getMatchVenues},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},[a("matchHome",{attrs:{datas:t.venues}})],1)],1)],1),a("van-tab",[a("div",{attrs:{slot:"title"},slot:"title"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"rule"}}),t._v("规则介绍 ")],1),a("div",{staticClass:"match-rele"},[a("div",{staticClass:"match-rele-bg"},[a("div",{staticClass:"match-rele-content",domProps:{innerHTML:t._s(t.regulation)}})])])]),a("van-tab",[a("div",{attrs:{slot:"title"},slot:"title"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"Trophy"}}),t._v("奖励介绍 ")],1),a("div",{staticClass:"rank-main",domProps:{innerHTML:t._s(t.reward)}})]),a("van-tab",[a("div",{attrs:{slot:"title"},slot:"title"},[a("van-icon",{attrs:{"class-prefix":"icon",name:"record"}}),t._v("比赛排名 ")],1),a("van-pull-refresh",{on:{refresh:t.onRecordRefresh},model:{value:t.recordRefreshing,callback:function(e){t.recordRefreshing=e},expression:"recordRefreshing"}},[0!==t.recordData.length?[a("card",[a("van-grid",{attrs:{"column-num":3}},t._l(t.recordHead,(function(e,r){return a("van-grid-item",{key:r},[a("div",{staticClass:"rank",class:"1"===e.rownum?"rank-one":"2"===e.rownum?"rank-two":"rank-three"},[a("div",{staticClass:"rank-sign"},[e.avatar?[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$UrlAvatar+e.avatar,round:"",type:"cover"}})]:[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$imgDefault,round:"",type:"cover"}})],a("div",{staticClass:"rank-icon"})],2),a("div",{staticClass:"rank-label"},[a("div",[t._v(t._s(e.name))]),a("div",{staticClass:"text-small"},[t._v(t._s(e.code))]),a("div",{staticClass:"text-small"},[t._v(t._s(e.match_time))])])])])})),1)],1),t.userRecordData?a("card",{staticClass:"rank-own m-t-sm"},[a("van-row",{staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"3"}},[t.userRecordData.avatar?[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$UrlAvatar+t.userRecordData.avatar,round:"",type:"cover"}})]:[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$imgDefault,round:"",type:"cover"}})]],2),a("van-col",{attrs:{span:"3"}},[t._v(t._s(t.userRecordData.name))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(t.userRecordData.code))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(t.userRecordData.match_time))]),a("van-col",{attrs:{span:"6"}},[a("div",{staticClass:"rank-own-icon m-auto"},[t._v(" "+t._s(t.userRecordData.rownum)+" ")])])],1)],1):t._e(),a("div",{staticClass:"rank-list m-t-sm"},[a("div",{staticClass:"list-head"},[a("van-row",{staticClass:"cell-col text-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"7"}},[t._v(" 队员 ")]),a("van-col",{attrs:{span:"5"}},[t._v("场馆代号")]),a("van-col",{attrs:{span:"6"}},[t._v("比赛用时")]),a("van-col",{attrs:{span:"6"}},[t._v("排名")])],1)],1),t._l(t.recordData,(function(e,r){return a("van-row",{key:r,staticClass:"cell-col text-center flex-center",attrs:{type:"flex"}},[a("van-col",{attrs:{span:"2"}},[e.avatar?[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$UrlAvatar+e.avatar,round:"",type:"cover"}})]:[a("van-image",{staticClass:"user-head-sign",attrs:{src:t.$imgDefault,round:"",type:"cover"}})]],2),a("van-col",{staticClass:"rank-list-name",attrs:{span:"5"}},[t._v(t._s(e.name))]),a("van-col",{attrs:{span:"5"}},[t._v(t._s(e.code))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(e.match_time))]),a("van-col",{attrs:{span:"6"}},[t._v(t._s(e.rownum))])],1)}))],2)]:[a("van-empty",{attrs:{description:"排名未公布"}})]],2)],1)],1)],1)}),[],!1,null,null,null);e.default=c.exports},b313:function(t,e,a){"use strict";var r=String.prototype.replace,n=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,n,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d2334:function(t,e,a){"use strict";function r(t,e){for(var a=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(a[r]=t[r]);return a}var n=Object.prototype.hasOwnProperty,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:r,assign:function(t,e){return Object.keys(e).reduce((function(t,a){return t[a]=e[a],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],a=[],r=0;r<e.length;++r)for(var n=e[r],s=n.obj[n.prop],o=Object.keys(s),i=0;i<o.length;++i){var c=o[i],l=s[c];"object"==typeof l&&null!==l&&-1===a.indexOf(l)&&(e.push({obj:s,prop:c}),a.push(l))}return function(t){for(var e;t.length;){var a=t.pop();if(e=a.obj[a.prop],Array.isArray(e)){for(var r=[],n=0;n<e.length;++n)void 0!==e[n]&&r.push(e[n]);a.obj[a.prop]=r}}return e}(e)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),a="",r=0;r<e.length;++r){var n=e.charCodeAt(r);45===n||46===n||95===n||126===n||48<=n&&n<=57||65<=n&&n<=90||97<=n&&n<=122?a+=e.charAt(r):n<128?a+=s[n]:n<2048?a+=s[192|n>>6]+s[128|63&n]:n<55296||57344<=n?a+=s[224|n>>12]+s[128|n>>6&63]+s[128|63&n]:(r+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),a+=s[240|n>>18]+s[128|n>>12&63]+s[128|n>>6&63]+s[128|63&n])}return a},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,a,s){if(!a)return e;if("object"!=typeof a){if(Array.isArray(e))e.push(a);else{if("object"!=typeof e)return[e,a];!s.plainObjects&&!s.allowPrototypes&&n.call(Object.prototype,a)||(e[a]=!0)}return e}if("object"!=typeof e)return[e].concat(a);var o=e;return Array.isArray(e)&&!Array.isArray(a)&&(o=r(e,s)),Array.isArray(e)&&Array.isArray(a)?(a.forEach((function(a,r){n.call(e,r)?e[r]&&"object"==typeof e[r]?e[r]=t(e[r],a,s):e.push(a):e[r]=a})),e):Object.keys(a).reduce((function(e,r){var o=a[r];return n.call(e,r)?e[r]=t(e[r],o,s):e[r]=o,e}),o)}}},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map;r({target:"Array",proto:!0,forced:!a("1dde")("map")},{map:function(t,e){return n(this,t,1<arguments.length?e:void 0)}})}}]);