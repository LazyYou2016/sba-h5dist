(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-418d122a"],{"1d8f":function(t,e,n){"use strict";n.r(e),n("9b20"),n("aa0d");var r=n("c24f"),o=n("751a"),a={name:"walletpay",data:function(){return{appId:"wx61fd819a116fc903",code:"",userInfo:"",walletItem:[5,10,20,50,100,200],welletVal:5,payTypeId:"0",out_trade_no:"",signature:{}}},mounted:function(){this.code=this.$getQueryVariable("code")||"",this.code&&!this.$Cookies.get("openid")&&this.getWxOpenid(),this.getUserInfo()},methods:{onCopy:function(){this.$Toast({message:"复制成功",position:"bottom"})},getUserInfo:function(){var t=this;Object(r.g)().then((function(e){e=e.data,t.userInfo=e})).catch((function(t){}))},setWalletpay:function(){switch(this.payTypeId){case"0":this.onWxPay();break;case"1":this.onAliPay()}},onWellet:function(t){this.welletVal=t},getWxOpenid:function(){var t,e=this;t={code:this.code},o.a.get("http://yingqiu23.com:8082/wechat/openid",t).then((function(t){t=t.data,e.$Cookies.set("openid",t.openid,{expires:1})})).catch((function(t){}))},onWxJsSdk:function(){var t,e,n=this;t={},e={user_id:this.userInfo.id,total_amount:this.welletVal,openid:this.$Cookies.get("openid")},o.a.post("http://yingqiu23.com:8082/wechat/jsapi",t,e).then((function(t){t.success&&(t=t.data,n.signature=t.signature,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",n.onBridgeReady)):n.onBridgeReady())})).catch((function(t){n.code=""}))},onBridgeReady:function(){var t=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:this.appId,timeStamp:String(this.signature.timeStamp),nonceStr:this.signature.nonceStr,package:this.signature.package,signType:this.signature.signType,paySign:this.signature.paySign},(function(e){"get_brand_wcpay_request:ok"===e.err_msg&&(t.getUserInfo(),t.$Toast({message:"支付成功",position:"bottom"}))}))},onWxPay:function(){var t,e,n=this,r=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.out_trade_no="",t={},e={user_id:this.userInfo.id,total_amount:this.welletVal},o.a.post("http://yingqiu23.com:8082/wechat/pay",t,e).then((function(t){t=t.data,r.clear(),n.out_trade_no=t.out_trade_no,n.payConfirm(t),window.location.href=t.mweb_url+"&redirect_url="+encodeURI("http://yingqiu23.com/#/wallet")})).catch((function(t){}))},getWxPayResult:function(){var t,e=this;t={out_trade_no:this.out_trade_no},o.a.get("http://yingqiu23.com:8082/wechat/pay-result",t).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},onAliPay:function(){var t=this,e=this.$toast.loading({message:"生成订单...",forbidClick:!0});this.$axios({method:"post",url:"http://yingqiu23.com:8082/alipay/pay",params:{access_token:this.userInfo.access_token},data:{user_id:this.userInfo.id,total_amount:this.welletVal}}).then((function(n){e.clear();var r=n.data;t.payConfirm(),n=document.createElement("div"),n.innerHTML=r,document.body.appendChild(n),t.out_trade_no=JSON.parse(document.getElementsByName("biz_content")[0].value).out_trade_no,document.forms[0].submit(),document.body.removeChild(n)})).catch((function(t){}))},getAliPayResult:function(){var t,e=this;t={out_trade_no:this.out_trade_no},o.a.get("http://yingqiu23.com:8082/alipay/pay-result",t).then((function(t){t.data.success&&(e.getUserInfo(),e.$Toast({message:"支付成功",position:"bottom"}))})).catch((function(t){}))},payConfirm:function(t){var e=this;this.$dialog.confirm({className:"pay-confirm",title:"请确认支付是否完成",confirmButtonText:"支付遇到问题，重新支付",cancelButtonText:"已完成支付"}).then((function(){e.out_trade_no=""})).catch((function(){switch(e.payTypeId){case"0":e.getWxPayResult();break;case"1":e.getAliPayResult()}}))}},watch:{},computed:{isWx:function(){var t=!1;return navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?"micromessenger"===navigator.userAgent.toLowerCase().match(/MicroMessenger/i)[0]:t}}};n=n("5d22"),a=Object(n.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("van-nav-bar",{staticClass:"nav",attrs:{fixed:"",title:"我的钱包","left-arrow":"","right-text":"账单"},on:{"click-left":t.$back,"click-right":function(e){return t.$router.push({path:"/wallet/list"})}}}),n("div",{staticClass:"page"},[n("div",{staticClass:"page-main"},[n("div",{staticClass:"count"},[n("div",{staticClass:"label"},[t._v(" 球币余额 ")]),n("div",{staticClass:"value",staticStyle:{height:"25px"}},[t._v(" "+t._s(t.userInfo.invented)+" "),n("div",{staticClass:"small"})])]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"球币充值"}},[n("div",{staticClass:"wallet"},[n("van-grid",{attrs:{"column-num":3}},t._l(t.walletItem,(function(e,r){return n("van-grid-item",{key:r,staticClass:"wallet-item",class:{active:e===t.welletVal},on:{click:function(n){return t.onWellet(e)}}},[n("div",{staticClass:"label"},[t._v(t._s(e)+" 球币")]),n("div",{staticClass:"small"},[t._v(t._s(e)+" 元")])])})),1)],1)]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"支付方式"}},[n("van-radio-group",{staticClass:"paytype",model:{value:t.payTypeId,callback:function(e){t.payTypeId=e},expression:"payTypeId"}},[n("van-cell-group",[n("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="0"}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"paytype-icon paytype-icon-wechat"}),t._v(" 微信 ")]},proxy:!0},{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"0"}})]},proxy:!0}])}),t.isWx?t._e():n("van-cell",{attrs:{clickable:""},on:{click:function(e){t.payTypeId="1"}},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"paytype-icon paytype-icon-zfb"}),t._v(" 支付宝 ")]},proxy:!0},{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"1"}})]},proxy:!0}],null,!1,534211696)})],1)],1)],1),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"充值如出现问题，加微信进行充值:"}},[n("div",{staticClass:"panel-content",staticStyle:{color:"red"}},[n("div",{staticClass:"text-center"},[t._v(" 13465245939 "),n("van-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:13465245939,expression:"13465245939",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],attrs:{type:"primary",size:"mini"}},[t._v("复制")])],1)])]),n("van-panel",{staticClass:"m-t-sm",attrs:{title:"温馨提示"}},[n("div",{staticClass:"panel-content"},[n("div",{staticClass:"agreement"},[n("div",{staticClass:"fs-12"},[t._v(" 1、充值的球币可直接用于赛事报名，不可转让或者提现。 ")]),n("div",{staticClass:"fs-12"},[t._v(" 2、充值过程中，如遇到问题，请至“我的”-“联系客服”点击联系客服。 ")])])])])],1),n("div",{staticClass:"page-foot"},[t.isWx?[n("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.onWxJsSdk}},[t._v("确认支付 "+t._s(t.welletVal)+" 元")])]:[n("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:t.setWalletpay}},[t._v("确认支付 "+t._s(t.welletVal)+" 元")])]],2)])],1)}),[],!1,null,null,null);e.default=a.exports},"20d0":function(t,e,n){"use strict";function r(t,e){u.apply(t,l(e)?e:[e])}function o(t,e,n,i,s,c,u,f,p,y,h,m,g){var v=t;if("function"==typeof u?v=u(e,v):v instanceof Date?v=y(v):"comma"===n&&l(v)&&(v=v.join(",")),null===v){if(i)return c&&!m?c(e,d.encoder,g):e;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||a.isBuffer(v))return c?[h(m?e:c(e,d.encoder,g))+"="+h(c(v,d.encoder,g))]:[h(e)+"="+h(String(v))];var b,w=[];if(void 0===v)return w;b=l(u)?u:(t=Object.keys(v),f?t.sort(f):t);for(var x=0;x<b.length;++x){var _=b[x];s&&null===v[_]||(l(v)?r(w,o(v[_],"function"==typeof n?n(e,_):e,n,i,s,c,u,f,p,y,h,m,g)):r(w,o(v[_],e+(p?"."+_:"["+_+"]"),n,i,s,c,u,f,p,y,h,m,g)))}return w}var a=n("7b05"),i=n("aaf3"),s=Object.prototype.hasOwnProperty,c={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,u=Array.prototype.push,f=Date.prototype.toISOString,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,formatter:i.formatters[i.default],indices:!1,serializeDate:function(t){return f.call(t)},skipNulls:!1,strictNullHandling:!1};t.exports=function(t,e){var n=t,a=function(t){if(!t)return d;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||d.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==t.format){if(!s.call(i.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=i.formatters[n];n=d.filter;return"function"!=typeof t.filter&&!l(t.filter)||(n=t.filter),{addQueryPrefix:("boolean"==typeof t.addQueryPrefix?t:d).addQueryPrefix,allowDots:void 0===t.allowDots?d.allowDots:!!t.allowDots,charset:e,charsetSentinel:("boolean"==typeof t.charsetSentinel?t:d).charsetSentinel,delimiter:(void 0===t.delimiter?d:t).delimiter,encode:("boolean"==typeof t.encode?t:d).encode,encoder:("function"==typeof t.encoder?t:d).encoder,encodeValuesOnly:("boolean"==typeof t.encodeValuesOnly?t:d).encodeValuesOnly,filter:n,formatter:r,serializeDate:("function"==typeof t.serializeDate?t:d).serializeDate,skipNulls:("boolean"==typeof t.skipNulls?t:d).skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:("boolean"==typeof t.strictNullHandling?t:d).strictNullHandling}}(e);"function"==typeof a.filter?n=(0,a.filter)("",n):l(a.filter)&&(p=a.filter);var u=[];if("object"!=typeof n||null===n)return"";t=e&&e.arrayFormat in c?e.arrayFormat:e&&"indices"in e&&!e.indices?"repeat":"indices";var f=c[t],p=p||Object.keys(n);a.sort&&p.sort(a.sort);for(var y=0;y<p.length;++y){var h=p[y];a.skipNulls&&null===n[h]||r(u,o(n[h],h,f,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}return e=u.join(a.delimiter),t=!0===a.addQueryPrefix?"?":"",a.charsetSentinel&&("iso-8859-1"===a.charset?t+="utf8=%26%2310003%3B&":t+="utf8=%E2%9C%93&"),0<e.length?t+e:""}},"751a":function(t,e,n){"use strict";var r=n("186d"),o=n("bb9a"),a=(r=n("fed1"),n.n(r));e.a={get:function(t,e){return Object(o.a)({url:t,method:"get",params:e})},post:function(t,e,n){return Object(o.a)({url:t,method:"post",params:e,data:n})},postQs:function(t,e){return Object(o.a)({url:t,method:"post",data:a.a.stringify(e)})},patch:function(t,e){return Object(o.a)({url:t,method:"patch",data:e})},put:function(t,e,n){return new Promise((function(r,a){Object(o.a)({url:t,method:"put",params:e,data:n}).then((function(t){r(t.data)})).catch((function(t){a(t)}))}))}}},"7b05":function(t,e,n){"use strict";function r(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n}var o=Object.prototype.hasOwnProperty,a=Array.isArray,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();t.exports={arrayToObject:r,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],i=o.obj[o.prop],s=Object.keys(i),c=0;c<s.length;++c){var l=s[c],u=i[l];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:i,prop:l}),n.push(u))}return function(t){for(;1<t.length;){var e=t.pop(),n=e.obj[e.prop];if(a(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){if(t=t.replace(/\+/g," "),"iso-8859-1"===n)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(t,e,n){if(0===t.length)return t;var r="string"==typeof t?t:String(t);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122?o+=r.charAt(a):s<128?o+=i[s]:s<2048?o+=i[192|s>>6]+i[128|63&s]:s<55296||57344<=s?o+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),o+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(a(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(i&&(i.plainObjects||i.allowPrototypes)||!o.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var s=e;return a(e)&&!a(n)&&(s=r(e,i)),a(e)&&a(n)?(n.forEach((function(n,r){var a;o.call(e,r)?(a=e[r])&&"object"==typeof a&&n&&"object"==typeof n?e[r]=t(a,n,i):e.push(n):e[r]=n})),e):Object.keys(n).reduce((function(e,r){var a=n[r];return o.call(e,r)?e[r]=t(e[r],a,i):e[r]=a,e}),s)}}},aaf3:function(t,e,n){"use strict";var r=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},c24f:function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"j",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"i",(function(){return d})),n.d(e,"d",(function(){return p}));var r=n("751a"),o=function(t){return r.a.get("/user/detail",t)},a=function(t,e){return r.a.put("/user/name",t,e)},i=function(t,e){return r.a.put("/user/sex",t,e)},s=function(t,e){return r.a.put("/user/birthday",t,e)},c=function(t,e){return r.a.put("/user/address",t,e)},l=function(t,e){return r.a.put("/user/info",t,e)},u=function(t){return r.a.get("/site/contact",t)},f=function(t){return r.a.get("/site/contact-info",t)},d=function(t){return r.a.get("/user/record",t)},p=function(t,e){return r.a.post("/user/feedback",t,e)}},df17:function(t,e,n){"use strict";function r(t,e){var n,r,o,c,l={},u=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,f=(t=e.parameterLimit===1/0?void 0:e.parameterLimit,u.split(e.delimiter,t)),d=-1,p=e.charset;if(e.charsetSentinel)for(n=0;n<f.length;++n)0===f[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[n]?p="utf-8":"utf8=%26%2310003%3B"===f[n]&&(p="iso-8859-1"),d=n,n=f.length);for(n=0;n<f.length;++n)n!==d&&((c=(c=-1===(c=-1===(c=(r=f[n]).indexOf("]="))?r.indexOf("="):c+1)?(o=e.decoder(r,s.decoder,p),e.strictNullHandling?null:""):(o=e.decoder(r.slice(0,c),s.decoder,p),e.decoder(r.slice(c+1),s.decoder,p)))&&e.interpretNumericEntities&&"iso-8859-1"===p?c.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))})):c)&&e.comma&&-1<c.indexOf(",")&&(c=c.split(",")),i.call(l,o)?l[o]=a.combine(l[o],c):l[o]=c);return l}function o(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=(t=a?r.slice(0,a.index):r,[]);if(t){if(!n.plainObjects&&i.call(Object.prototype,t)&&!n.allowPrototypes)return;s.push(t)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,o=t.length-1;0<=o;--o){var a,i,s,c=t[o];"[]"===c&&n.parseArrays?a=[].concat(r):(a=n.plainObjects?Object.create(null):{},i="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,s=parseInt(i,10),n.parseArrays||""!==i?!isNaN(s)&&c!==i&&String(s)===i&&0<=s&&n.parseArrays&&s<=n.arrayLimit?(a=[])[s]=r:a[i]=r:a={0:r}),r=a}return r}(s,e,n)}}var a=n("7b05"),i=Object.prototype.hasOwnProperty,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:a.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1};t.exports=function(t,e){var n=function(t){if(!t)return s;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var e=(void 0===t.charset?s:t).charset;return{allowDots:void 0===t.allowDots?s.allowDots:!!t.allowDots,allowPrototypes:("boolean"==typeof t.allowPrototypes?t:s).allowPrototypes,arrayLimit:("number"==typeof t.arrayLimit?t:s).arrayLimit,charset:e,charsetSentinel:("boolean"==typeof t.charsetSentinel?t:s).charsetSentinel,comma:("boolean"==typeof t.comma?t:s).comma,decoder:("function"==typeof t.decoder?t:s).decoder,delimiter:("string"==typeof t.delimiter||a.isRegExp(t.delimiter)?t:s).delimiter,depth:("number"==typeof t.depth?t:s).depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof t.interpretNumericEntities?t:s).interpretNumericEntities,parameterLimit:("number"==typeof t.parameterLimit?t:s).parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:("boolean"==typeof t.plainObjects?t:s).plainObjects,strictNullHandling:("boolean"==typeof t.strictNullHandling?t:s).strictNullHandling}}(e);if(""===t||null==t)return n.plainObjects?Object.create(null):{};for(var i="string"==typeof t?r(t,n):t,c=n.plainObjects?Object.create(null):{},l=Object.keys(i),u=0;u<l.length;++u){var f=l[u];f=o(f,i[f],n),c=a.merge(c,f,n)}return a.compact(c)}},fed1:function(t,e,n){"use strict";var r=n("20d0"),o=n("df17");n=n("aaf3");t.exports={formats:n,parse:o,stringify:r}}}]);